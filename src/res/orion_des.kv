#:kivy 1.11.1

#: import NoTransition kivy.uix.screenmanager.NoTransition
#: import Image kivy.uix.image.Image
#=============================================

WindowManager:
    transition: NoTransition()

    MenuScreen:
        id: MenuScreen
    ConnectScreen:
        id: ConnectScreen
    ConnectPairScreen:
        id: ConnectPairScreen
    ConnectIDScreen:
        id: ConnectIDScreen
    ConnectOfflineScreen:
        id: ConnectOfflineScreen
    LoggerScreen:
        id: LoggerScreen
    AboutScreen:
        id: AboutScreen
    
#=============================================

<MenuScreen>:
    name: "MenuScreen"
    
    Image:
        source: app.assets.MAIN_SCREEN
        size_hint: 1,1
        keep_ratio: False
        allow_stretch: True
    
    BoxLayout:
        orientation: 'vertical'
        size_hint: 0.5, 0.5
        pos_hint: {'center_x': 0.6, 'center_y': 0.4}
        padding: 100
        spacing: 40

        ImageButton:
            id: connect_btn
            source: app.assets.CONNECT
            size_hint: 0.5, 0.1
            keep_ratio: True

            on_release: 
                app.root.current = app.choose_connect_screen()

        ImageButton:
            id: logger_btn
            source: app.assets.LOGGER
            size_hint: 0.5, 0.1
            keep_ratio: True

            on_release: 
                app.root.current = "LoggerScreen"

        ImageButton:
            id: about_btn
            source: app.assets.ABOUT
            size_hint: 0.5, 0.1
            keep_ratio: True

            on_release: 
                app.root.current = "AboutScreen"


<ConnectPairScreen>:
    name: "ConnectPairScreen"
    id: ConnectPairScreen
    Image:
        source: app.assets.CONNECT_SCREEN
        size_hint: 1,1
        keep_ratio: False
        allow_stretch: True

    FloatLayout:
        Image:
            source: app.assets.PAIR_IMG
            size_hint: 1,1
            pos_hint: {'center_x': 0.5, 'center_y': 0.25}
            keep_ratio: False
            allow_stretch: False

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 0.2, 0.2
            pos_hint: {'center_x': 0.5, 'center_y': 0.58}

            ImageButton:
                id: pair_btn
                source: app.assets.PAIR_BTN
                size_hint: 0.6, 0.6
                keep_ratio: True
                on_release: 
                    app.update_id()
                    app.root.current = "ConnectIDScreen"


        BackButton:


<ConnectIDScreen>:
    name: "ConnectIDScreen"
    Image:
        source: app.assets.CONNECT_SCREEN
        size_hint: 1,1
        keep_ratio: False
        allow_stretch: True

    FloatLayout:
        Image:
            source: app.assets.ID_FRAME
            size_hint: 0.4, 0.4
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            keep_ratio: False
            allow_stretch: False


        IDTextWidget:
            id: id_widg
            size_hint: 0.7, 0.7
            pos_hint: {'center_x': 0.727, 'center_y': 0.22}



        BackButton:

<ConnectOfflineScreen>:
    name: "ConnectOfflineScreen"
    Image:
        source: app.assets.CONNECT_SCREEN
        size_hint: 1,1
        keep_ratio: False
        allow_stretch: True

    FloatLayout:
        Image:
            source: app.assets.OFFLINE_TITLE
            size_hint: 1,1
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}
            keep_ratio: False
            allow_stretch: False

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 0.1, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            ImageButton:
                id: discon_btn
                source: app.assets.REFRESH_BTN
                size_hint: 0.6, 0.6
                keep_ratio: True


        BackButton:

<ConnectScreen>:
    name: "ConnectScreen"
    Image:
        source: app.assets.CONNECT_SCREEN
        size_hint: 1,1
        keep_ratio: False
        allow_stretch: True

    FloatLayout:
        Image:
            source: app.assets.CONNECTED_TITLE
            size_hint: 1,1
            pos_hint: {'center_x': 0.5, 'center_y': 0.6}
            keep_ratio: False
            allow_stretch: False

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 0.1, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            ImageButton:
                id: discon_btn
                source: app.assets.DISCONNECT_BTN
                size_hint: 0.6, 0.6
                keep_ratio: True


        BackButton:


<LoggerScreen>:
    name: "LoggerScreen"
    Image:
        source: app.assets.LOGGER_SCREEN
        size_hint: 1,1
        keep_ratio: False
        allow_stretch: True
    
    FloatLayout: 
        BackButton:      

<AboutScreen>:
    name: "AboutScreen"
    Image:
        source: app.assets.ABOUT_SCREEN
        size_hint: 1,1
        keep_ratio: False
        allow_stretch: True

    FloatLayout: 
        BackButton:

<BackButton>:
    text: "Back"
    font_name: app.assets.DEF_FONT
    size_hint: None, None
    pos_hint: {"right": 0.98, "bottom": 0.9}
    font_size: 46

    on_release:
        app.root.current = "MenuScreen"

<TransTextInput>:
    multiline: False
    foreground_color: (1,0,1,1)
    background_color: (0,0,0,0)
    cursor_color: (1, 1, 1, 0.971)
    cursor_width: 1
    coulor: (1, 1, 1, 1)

    canvas.before:
        Color:
            rgba: self.coulor